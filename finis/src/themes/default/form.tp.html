<div class="card">
    <div class="card-body bg-light">
        <!-- if {text_on_update_ok} -->
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {text_on_update_ok}
        </div>
        <!-- end if {text_on_update_ok} -->
        <!-- if {text_on_update_fail} -->
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {text_on_update_fail}
        </div>
        <!-- end if {text_on_update_fail} -->
        <!-- if {text_on_insert_ok} -->
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {text_on_insert_ok}
        </div>
        <!-- end if {text_on_insert_ok} -->
        <!-- if {text_on_insert_fail} -->
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {text_on_insert_fail}
        </div>
        <!-- end if {text_on_insert_fail} -->
        <form onsubmit="formChanged = false;" id="editform" method="post" action="{action}" enctype="multipart/form-data" onchange="set_changed();">
            <!-- contents -->
            <div class="form-group row">
                <!-- group -->
                <fieldset>
                    <legend>{groupname}</legend>
                    <!-- end_group -->
                    <!-- item -->
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label" for="{fieldname}">{title}:<!-- error --><em
                                style="color:red"><br />{error}</em><!-- end_error --></label>
                        <div class="col-sm-10">
                            <!-- inputattributes radio:class="form-check-input" style=""  -->
                            <!-- inputattributes:class="form-control"  -->{input}
                            <!-- if {help} --><small class="form-text text-muted">{help}</small><!-- end if {help} -->
                        </div>
                    </div>
                    <hr />
                    <!-- end_item -->

                    <!-- item_type_radio -->
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label" for="{fieldname}">{title}:<!-- error --><em
                                style="color:red"><br />{error}</em><!-- end_error --></label>
                        <div class="col-sm-10">
                            <div class="form-check">
                                <!-- inputattributes:class=""  -->{input}
                                <!-- if {help} --><small
                                    class="form-text text-muted">{help}</small><!-- end if {help} -->
                            </div>
                        </div>
                    </div>
                    <hr />
                    <!-- end_item_type_radio -->
                    <!-- item_type_check -->
                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label" for="{fieldname}">{title}:<!-- error --><em
                                style="color:red"><br />{error}</em><!-- end_error --></label>
                        <div class="col-sm-10">
                            <div class="form-check">
                                <!-- inputattributes:class="form-check-input"  --><span class="form-switch">{input}</span>
                                <!-- if {help} --><small
                                    class="form-text text-muted">{help}</small><!-- end if {help} -->
                            </div>
                        </div>
                    </div>
                    <hr />
                    <!-- end_item_type_check -->
                    <!-- endgroup -->
                </fieldset>
                <!-- end_endgroup -->
            </div>

            <!-- end_contents -->
            <button class="btn btn-primary" type="submit">{textsave}</button>
            <!-- if {textcancel} -->
            <a class="btn btn-primary" href="{url_cancel}" type="submit">{textcancel}</a>
            <!-- end if {textcancel} -->
        </form>
    </div>
</div>
<script>
    let formChanged = false; // Track if the form has changed

    // Function to set the form as changed
    function set_changed() {
        formChanged = true;
    }

    // Add event listener for the beforeunload event
    window.addEventListener('beforeunload', function (e) {
        // Check if the form has been changed
        if (formChanged) {
            
            // Display a confirmation dialog
            const confirmationMessage = '{i18n:Are you sure you want to leave this page? Unsaved changes will be lost}';
            (e || window.event).returnValue = confirmationMessage; // For legacy browsers
            return confirmationMessage; // For modern browsers
        }
    });
</script>